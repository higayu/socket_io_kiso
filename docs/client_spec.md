# Socket.IO クライアント仕様書

## 概要
このドキュメントでは、Socket.IOを使用したクライアント側の実装仕様について説明します。

## 接続設定
- Socket.IOクライアントは自動的にサーバーに接続を試みます
- 接続状態はデバッグログに表示されます

## イベント一覧

### クライアントからサーバーへの送信イベント

#### clientMessage
クライアントからサーバーへのメッセージ送信時に使用されるイベントです。

**送信データ形式:**
```javascript
{
  message: string,    // ユーザーが入力したメッセージ
  timestamp: string   // ISO形式のタイムスタンプ
}
```

**使用例:**
```javascript
socket.emit('clientMessage', {
  message: "こんにちは",
  timestamp: "2024-03-21T10:00:00.000Z"
});
```

### サーバーからクライアントへの受信イベント

#### userCount
現在の接続ユーザー数を更新するイベントです。

**受信データ形式:**
```javascript
number  // 接続ユーザー数
```

#### serverResponse
サーバーからの応答メッセージを受信するイベントです。

**受信データ形式:**
```javascript
{
  message: string  // サーバーからの応答メッセージ
}
```

#### connect
Socket.IOの接続確立時に発火するイベントです。

#### disconnect
Socket.IOの接続切断時に発火するイベントです。

#### error
エラー発生時に発火するイベントです。

**受信データ形式:**
```javascript
string  // エラーメッセージ
```

## UI要素

### メッセージ送信フォーム
- テキスト入力フィールド
- 送信ボタン
- 送信後は入力フィールドが自動的にクリアされます

### デバッグログ
- すべてのイベントの送受信を時系列で表示
- タイムスタンプ付きでログを表示
- 自動スクロール機能付き

### ユーザー数表示
- 現在の接続ユーザー数をリアルタイムで表示
- 背景色付きの表示領域

## エラーハンドリング
- フォーム送信時は空メッセージの送信を防止
- 接続エラー時はデバッグログにエラー内容を表示
- 切断時は自動再接続を試みる

## 注意事項
- メッセージ送信時は必ずタイムスタンプを含める
- デバッグログは時系列順に表示される
- 接続状態の変更はすべてデバッグログに記録される 